<ui-sys title="我的记录" img="/static/img/4put2.png" imgBottom navBg="bg-cyan-gradient" isTabbar footer="" needLoading="{{isLoading}}">
    <view class="p-3 text-center">
        <ui-tab tab="{{[{ name:'测验',icon:'cicon-event-list',tag:tabTotal.exerciseCount},{icon:'cicon-community-o', name:'通知',tag:tabTotal.notifyCount},{name:'口算',icon:'cicon-numcode',tag:tabTotal.calcCount}]}}" tpl="btn" mark="bg-white radius" ui="bg-cyan-gradient radius" curColor="text-orange" inline bind:change="tabChange" />
    </view>
    <scroll-view style="height: 70vh;position: fixed; bottom: 148rpx;" scroll-y bindscrolltolower="scrolltolower">
        <i-swipeout i-class="i-swipeout-demo-item" actions="{{actions}}" wx:for="{{recordList[tabIndex]}}" wx:key="index" data-index="{{index}}" bind:change="swipeoutClick" wx:if="{{tabIndex===0 }}">
            <view slot="content" style="height: 60px;">
                <view class="classCard">
                    <view class="left-class-card">
                        <image src="{{item.createrAvatarUrl}}" class="imageClass"></image>
                    </view>
                    <view class="right-class-card">
                        <view class="right-class-card-top"><text>{{item.courseName}}</text> <text>{{tabIndex===0?'得分:'+item.exercisesScoreRecord:''}}</text></view>
                        <view class="right-class-card-bottom">
                            <view>
                                <i-rate value="{{item.starRate}}" size="26" />
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </i-swipeout>
        <i-swipeout i-class="i-swipeout-demo-item" actions="{{actions}}" wx:for="{{recordList[tabIndex]}}" wx:key="index" data-index="{{index}}" bind:change="swipeoutClick" wx:if="{{tabIndex === 1}}" >
                <view slot="content" style="height: 60px;" >
                    <view class="classCard" bindtap="cardClick" data-index="{{index}}">
                        <view class="left-class-card">
                            <image src="{{item.createrAvatarUrl}}" class="imageClass"></image>
                        </view>
                        <view class="right-class-card">
                            <view class="right-class-card-top"><text>{{item.courseName}}</text>
                                <text class="notify_textArea">{{item.textArea}}</text>
                            </view>
                            <view style="display: flex;flex-direction: row;">
                                <view style="line-height: 58rpx;">
                                    {{item.meta.createdAt}}
                                </view>
                                <view class="cu-avatar-group" wx:if="{{item.imgList.length > 0}}">
                                    <block wx:for="{{item.imgList}}" wx:key="index">
                                        <view class="cu-avatar round sm" wx:key="index" class="cu-avatar round sm" style="background-image:url({{item}});"></view>
                                    </block>
                                </view>
                            </view>
                        </view>
                    </view>
                </view>
            </i-swipeout>
    </scroll-view>
    <ui-modal show="{{modalVisible}}" confirmText="确定" transparent mask="40" showCancel="{{false}}" title="通知详情" bind:success="modalConfirm">
        <view class="p-5 flex-center" style="flex-direction: column;" wx:if="{{tabIndex === 1}}">
            <view class="notify_textArea_modal">{{clickItem.textArea}}</view>
            <view style="margin-top: 30rpx;display: flex;justify-content: left; ">
                <image wx:for="{{clickItem.imgList}}" wx:key="index" src="{{item}}" style="width: 150rpx;height: 150rpx;margin-left: 10rpx;" data-url="{{item}}" bindtap="viewImage"></image>
            </view>
        </view>
    </ui-modal>
</ui-sys>